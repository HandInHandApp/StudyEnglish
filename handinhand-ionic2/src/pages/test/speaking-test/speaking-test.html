

<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{headername}}</ion-title>
    <ion-buttons end>
      <button ion-button (click)="gotoReview()" type="submit" block>
        Review
      </button>
      <button ion-button (click)="gotoBack()" type="submit" block>
        BACK
      </button>
      <button ion-button (click)="gotoNext()" type="submit" block>
        NEXT
      </button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar>
   <ion-buttons left>
      <button ion-button  (click)="gotoHome()" type="submit" block>
        首页
      </button>
      <button ion-button (click)="gotoNext()" type="submit" block>
        暂停 
      </button>
    </ion-buttons>
    <div style="text-align:center;">
        <label *ngIf="step.indexOf('p')!=-1">{{passages.passage[step].title}} </label>
        <label *ngIf="step.indexOf('q')!=-1">{{passages.question[step].title}}</label>
    </div>
       <!-- <ion-buttons end>
      <button ion-button  (click)="gotoHome()" type="submit" block>
        首页
      </button>
      <button ion-button (click)="gotoNext()" type="submit" block>
        暂停
      </button>
    </ion-buttons> -->
     <ion-buttons end>
<span class="button-inner">
      <button ion-button (click)="gotoBack()" type="submit" block>
         HideTime
      </button> 
      <button ion-button  >
            <timer-countdown title="headertimer" [endDate]="counttime" (childEvent) = "timerEnd($event)"></timer-countdown>   
      </button> 
         
</span>

       <!-- <roy-countdown title="" [endDate]="endDate"></roy-countdown>  -->

    </ion-buttons> 
  </ion-toolbar>
</ion-header>





<ion-content #popoverContent padding class="popover-page  ">

      

                <div *ngFor="let item of steps;  let i = index;"  >
                    <div *ngIf="step === item && step.indexOf('p')==-1">
                        
                        <!-- <audio autoplay controls='controls' id='Audio1' style="width: 400px;" *ngIf="passages.question[item].mp3!=''">
                              <source src={{passages.question[item].mp3}} type='audio/mpeg' />
                        </audio> -->
                        <!-- <audio autoplay id='Audio1'  *ngIf="passages.question[item].mp3!=''">
                              <source src={{passages.question[item].mp3}} type='audio/mpeg' />
                        </audio> -->

                        <ion-row>
                            <ion-col col-2></ion-col>
                            <ion-col col-8>
                                <div  *ngIf="passages.question[step].para">
                                <h6> <b>{{passages.question[step].para}}</b> </h6>
                                <br />
                                <div style="border-top: 4px solid #000000"></div>
                                <br />
                                <br />
                                <br />
                                <ion-row *ngIf="startrecord==0" style="height: 100px;">
                                    <p style="text-align:center">
                                    <img src='assets/img/recorder.png' style="width: 80px;   position: absolute;  left: 46%; " alt=""
                                    (click)="playAudio1() " >
                                    </p>
                                </ion-row>
                                 <div class="record-upload-buttons"  *ngIf="startrecord==0">
                                     <div   *ngIf="startrecord==-2">
                                        <button ion-button color="logo-blue" round [disabled]="!recorderIsReady()" (click)="onClickStartPauseButton()">
                                            <ion-icon [name]="recordButtonIcon">
                                            </ion-icon>
                                        </button>
                                        <button ion-button color="logo-orange" round [disabled]="!recorderIsReady() || webAudioRecord.isInactive" (click)="onClickStopButton()">
                                            <ion-icon name="square">
                                            </ion-icon>
                                        </button>
                                     </div>

                                </div> 
                                <br />
                                <br />
                                <div *ngIf="startrecord>0" >
                                    <ion-row  >
                                        <ion-col col-4></ion-col>
                                        <ion-col col-4>
                                        <div *ngIf="startrecord==1">
                                            <ion-list>
                                                <div class = "bootstrap-iso">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr><th style="text-align: center; background:#f4f4f4;"> ----</th></tr>
                                                        </thead>
                                                            <tbody>
                                                                <tr><td style="text-align: center;">----</td></tr>
                                                                <tr><td style="text-align: center;">----</td></tr>
                                                            </tbody>
                                                        </table>
                                                </div>
                                            </ion-list>
                                        </div>
                                        <div *ngIf="startrecord==2">
                                            <ion-list>
                                                <div class = "bootstrap-iso">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr><th style="text-align: center; background:#f4f4f4;"> Prepare your response</th></tr>
                                                        </thead>
                                                            <tbody>
                                                                <tr><td style="text-align: center;">
                                                                    <timer-countdown title="prapare" [endDate]="praparetimer" (childEvent) = "timerEnd($event)"></timer-countdown>      
                                                                </td></tr>
                                                                <tr><td style="text-align: center;">----</td></tr>
                                                            </tbody>
                                                        </table>
                                                </div>
                                            </ion-list>
                                        </div>
                                        <div *ngIf="startrecord==3">
                                            <ion-list>
                                                <div class = "bootstrap-iso">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr><th style="text-align: center; background:#f4f4f4;"> Recording</tr>
                                                        </thead>
                                                            <tbody>
                                                                <tr><td style="text-align: center;">
                                                                    <timer-countdown title="recording" [endDate]="recordtimer" (childEvent) = "timerEnd($event)"></timer-countdown>      
                                                                </td></tr>
                                                                <tr><td style="text-align: center;">----</td></tr>
                                                            </tbody>
                                                        </table>
                                                </div>
                                            </ion-list>
                                        </div>
   

                                        </ion-col>
                                        <ion-col col-4></ion-col>
                                    </ion-row>
      
                                </div>
              
                                <recordlist-page [refresh]="refreshtimer" [title]="step"> </recordlist-page> 

            

                                <!-- <div id="myurl">
                                    show xxx
                                </div> -->

                                </div>
                            </ion-col>
                            <ion-col col-2></ion-col>
                        </ion-row>
                    </div>      
                </div>
  
                <div #popoverText class="text-to-change">
                    <div *ngIf="step.indexOf('p')!=-1">

                      <ion-row>
                        <ion-col col-3></ion-col>
                        <ion-col col-6>
                            <!-- <div *ngIf="step.indexOf('p')==-1">
                            <audio autoplay controls='controls' id='Audio1' style="width: 400px;" *ngIf="passages.question[step].mp3!=''">
                              <source src={{passages.question[step].mp3}} type='audio/mpeg' />
                            </audio>
                             </div>   -->

                            <a href="#" class="thumbnail" *ngIf="passages.passage[step].img!=''">
                                <img src={{passages.passage[step].img}} alt="" >
                            </a>

                            <!-- <audio  autoplay  id='Audio1' style="width: 400px;" *ngIf="passages.passage[step].mp3!=''">
                              <source src={{passages.passage[step].mp3}} type='audio/mpeg' />
                            </audio> -->

                            <div  *ngIf="passages.passage[step].contents.length > 0">
                               <p *ngFor="let para of passages.passage[step].contents">
                                   {{passages.passage[step].contents}}
                                </p>
                            </div>

                        </ion-col>
                        <ion-col col-3></ion-col>
                    </ion-row>
                    </div>

                </div>      
      
</ion-content>






